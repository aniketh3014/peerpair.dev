(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[786],{8310:function(e,n,r){Promise.resolve().then(r.bind(r,3884)),Promise.resolve().then(r.t.bind(r,5250,23))},3884:function(e,n,r){"use strict";r.r(n),r.d(n,{PeerStrem:function(){return f}});var t=r(7437);r(2304);var s=r(3671),a=r(1126),i=r(2265);r(5355);var o=r(3472),u=(0,o.$)("8d04aad8bf4d6e5affb321fedc8be27909fe4d6f"),d=r(7907),c=(0,o.$)("59cc07ab68581098448a314f2698d4d5c45e906c");let l=r(9079).env.NEXT_PUBLIC_STREAM_KEY;function f(e){let{room:n,Id:r}=e,o=(0,a.useSession)(),[f,v]=(0,i.useState)(null),[h,_]=(0,i.useState)(null),b=(0,d.useRouter)();return(0,i.useEffect)(()=>{var e,t,a;if(!n||!(null===(e=o.data)||void 0===e?void 0:e.user))return;let i=new s.GRk({apiKey:l,user:{id:r,name:null!==(t=o.data.user.name)&&void 0!==t?t:void 0,image:null!==(a=o.data.user.image)&&void 0!==a?a:void 0},tokenProvider:()=>u(r)}),d=i.call("default",n.id);return d.join({create:!0}),v(i),_(d),()=>{d.leave().then(()=>i.disconnectUser()).catch(console.error)}},[o,n,r]),f&&h&&(0,t.jsx)(s.hbc,{client:f,children:(0,t.jsx)(s.c3T,{children:(0,t.jsxs)(s.N_D,{call:h,children:[(0,t.jsx)(s.gy1,{}),(0,t.jsx)(s.PHQ,{onLeave:async()=>{n.userId===r&&await c({roomId:n.id}),b.push("/rooms")}}),(0,t.jsx)(s.lkp,{onClose:()=>void 0})]})})})}}},function(e){e.O(0,[674,463,262,250,138,747,971,69,744],function(){return e(e.s=8310)}),_N_E=e.O()}]);